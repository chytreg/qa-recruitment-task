@import ../base/global

// config
$crs-sidebar-width: 250px
$crs-sidebar-bg: $crs-secondary-color
$crs-sidebar-bg-hover: darken($crs-secondary-color, 5%)
$crs-sidebar-nav-color: $crs-quaternary-color
$crs-sidebar-nav-font-size: 14px
$crs-sidebar-nav-font-weight: $crs-global-font-weight-bold
$crs-sidebar-link-padding: 14px ($crs-grid-gutter-width / 2)
$crs-sidebar-dropdown-link-padding: 11px ($crs-grid-gutter-width / 2)
$crs-sidebar-dropdown-active-bar: $crs-primary-color

.crs-sidebar
  width: rem($crs-sidebar-width)
  position: fixed
  height: 100%
  background: $crs-sidebar-bg

.crs-sidebar ~ .crs-content

  @media #{$large-up}
    margin-left: rem($crs-sidebar-width)

.crs-sidebar__nav
  list-style: none
  margin: 0
  padding: 0
  color: $crs-sidebar-nav-color
  font-weight: $crs-sidebar-nav-font-weight
  font-size: rem($crs-sidebar-nav-font-size)
  max-height: calc(100% - #{$crs-global-topbar-height})
  overflow-y: auto

.crs-sidebar__option
  display: block
  box-sizing: border-box
  position: relative
  box-shadow: inset 0 0 0 $crs-sidebar-dropdown-active-bar

  &:hover
    background: $crs-sidebar-bg-hover

.crs-sidebar__option--has-dropdown
  transition: box-shadow .2s ease
  transition-delay: .8s

  .crs-sidebar__link:after
    content: "\e618"
    font-size: rem(12px)
    font-family: 'cuirass-icons'
    speak: none
    font-style: normal
    font-weight: normal
    font-variant: normal
    text-transform: none
    line-height: 0
    transform: rotateX(0)
    transition: transform .6s ease

    -webkit-font-smoothing: antialiased
    -moz-osx-font-smoothing: grayscale

    position: absolute
    right: rem($crs-grid-gutter-width / 1.2)
    top: calc(50%)
    width: 0
    height: 0

.crs-sidebar__option--active
  background: $crs-sidebar-bg-hover
  box-shadow: inset rem(8px) 0 0 $crs-sidebar-dropdown-active-bar
  transition-delay: 0

  &.crs-sidebar__option--has-dropdown

    .crs-sidebar__link:hover
      background: none

    .crs-sidebar__link:after
      transform: rotateX(180deg)

.crs-sidebar__link
  padding: rem($crs-sidebar-link-padding)
  color: $crs-sidebar-nav-color
  display: block
  cursor: pointer


  &:visited
    color: $crs-sidebar-nav-color


.crs-sidebar-dropdown
  max-height: 0
  overflow: hidden
  display: block
  transition: max-height .7s ease
  list-style: none
  padding: 0
  margin: 0 0 0 rem(8px)
  font-size: rem(12px)


.crs-sidebar-dropdown__option
  display: block
  position: relative

  .crs-sidebar-dropdown__link
    cursor: pointer
    display: block

    color: darken($crs-sidebar-nav-color, 5%)
    padding: rem($crs-sidebar-dropdown-link-padding)

    &:hover
      background: darken($crs-sidebar-bg-hover, 5%)

    &:before
      content: ""
      display: block
      position: absolute
      left: 0
      transform: translateX(rem(-10px))
      transition: transform .2s ease
      transition-delay: 0
      top: rem(7px)
      width: 0
      height: 0
      border-style: solid
      border-width: rem(8px 0 8px 8px)
      border-color: transparent transparent transparent $crs-sidebar-dropdown-active-bar

.crs-sidebar__option--active .crs-sidebar-dropdown__link--active
  background: darken($crs-sidebar-bg-hover, 5%)

  &:before
    transform: translateX(0)
    transition-delay: .2s

.crs-sidebar__option--active

  .crs-sidebar-dropdown
    max-height: rem(400px)

  .crs-sidebar__link:hover
    // box-shadow: inset 8px 0 0 $crs-sidebar-dropdown-active-bar

